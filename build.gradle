/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * user guide available at https://docs.gradle.org/5.0/userguide/java_library_plugin.html
 */


plugins {
	id 'application'
	id 'org.openjfx.javafxplugin' version '0.0.10'
    id 'org.beryx.jlink' version '2.24.4'
}


project.version = '0.0.1'

repositories {
    mavenCentral()
     flatDir {
       dirs 'localrepo'
   }
}

application {
	mainModule = "com.harmonyjapan.bidirectable"
	mainClass = "main.MainApp"
}

mainClassName = "${moduleName}/MainApp"

dependencies {

	implementation ('org.controlsfx:controlsfx:11.1.1'){
		exclude group: 'org.openjfx'
	}

	implementation ('com.tobiasdiez:easybind:2.2'){
		exclude group: 'org.openjfx'
	}

	implementation 'org.fxmisc.easybind:easybind:1.0.3'


}

javafx {
    version = "17.0.1"
    modules = [ 'javafx.controls','javafx.fxml','javafx.swing','javafx.base']
}


compileJava.options.encoding = 'UTF-8'

sourceSets.main {
    java {
        srcDir 'src/main/java' 
        }
    resources{
        srcDirs = ['src/main/resources']
        exclude "**/*.java"
    }
}

jlink {

	options = ['--strip-debug', '--compress', '2', '--no-header-files', '--no-man-pages']

	launcher {
		name = 'BidirecTable'
	}

	addExtraDependencies("javafx")

	jpackage{

		skipInstaller = true
		installerOptions = [
				'--file-associations', 'src/main/resources/associations.properties',
				'--app-version', project.version
		]
		if (org.gradle.internal.os.OperatingSystem.current().windows) {
			installerOptions += ['--win-per-user-install', '--win-dir-chooser', '--win-menu', '--win-shortcut']
		}
	}
}